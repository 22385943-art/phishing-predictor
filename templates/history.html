<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PhishingPredictor | Historial de Datos</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    font-family:'Roboto',sans-serif;
    background:#f9f9f9;
    color:#333;
}
canvas#bgCanvas{
    position:fixed;
    inset:0;
    z-index:0;
}

/* HEADER */
header{
    position:relative;
    z-index:2;
    padding:1.5rem 3rem;
    background:rgba(255,255,255,.95);
    box-shadow:0 4px 14px rgba(0,0,0,.08);
    display:flex;
    justify-content:space-between;
    align-items:center;
}
header h1{font-size:2.2rem;color:#1e3c72}
.home-btn{
    text-decoration:none;
    background:linear-gradient(135deg,#1e90ff,#00bfff);
    color:#fff;
    padding:.6rem 1.6rem;
    border-radius:50px;
    display:flex;
    gap:.6rem;
}

/* CONTENIDO */
.main-content{
    position:relative;
    z-index:2;
    max-width:1200px;
    margin:0 auto;
    padding:2.5rem;
}
.section{
    background:rgba(255,255,255,.97);
    border-radius:22px;
    box-shadow:0 18px 45px rgba(0,0,0,.14);
    padding:2rem;
    margin-bottom:2.5rem;
}
.section h2{
    color:#1e3c72;
    margin-bottom:1rem;
}

/* BADGES */
.badge{
    padding:.3rem .8rem;
    border-radius:50px;
    font-size:.8rem;
    font-weight:600;
}
.phishing{background:rgba(231,76,60,.15);color:#c0392b}
.safe{background:rgba(39,174,96,.15);color:#1e8449}

/* DATATABLES */
table.dataTable{width:100%!important;font-size:.9rem}
.dataTables_wrapper{margin-top:1rem}
</style>
</head>

<body>

<canvas id="bgCanvas"></canvas>

<header>
    <h1>PhishingPredictor</h1>
    <a href="/" class="home-btn"><i class="fas fa-home"></i> Inicio</a>
</header>

<div class="main-content">

<!-- ===== HISTORIAL ===== -->
<div class="section">
<h2>üìä Historial de predicciones</h2>

<table id="predictionsTable" class="display">
<thead>
<tr>
    <th>Fecha</th>
    <th>Tipo</th>
    <th>Resultado</th>
    <th>Probabilidad</th>
    <th>Input</th>
</tr>
</thead>
<tbody>
{% for d in predictions %}
<tr>
    <td>{{ d.fecha.strftime("%Y-%m-%d %H:%M") }}</td>
    <td>{{ d.tipo }}</td>
    <td>
        {% if d.es_phishing %}
            <span class="badge phishing">Phishing</span>
        {% else %}
            <span class="badge safe">Seguro</span>
        {% endif %}
    </td>
    <td>{{ d.probabilidad }}%</td>
    <td>{{ d.input }}</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

<!-- ===== MAPA ===== -->
<div class="section">
<h2>üåç Casos reales documentados</h2>

<table id="mapaTable" class="display">
<thead>
<tr>
    <th>Pa√≠s</th>
    <th>Tipo</th>
    <th>A√±o</th>
    <th>T√≠tulo</th>
</tr>
</thead>
<tbody>
{% for m in mapa %}
<tr>
    <td>{{ m.pais }}</td>
    <td>{{ m.tipo }}</td>
    <td>{{ m.anio }}</td>
    <td>{{ m.titulo }}</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

<!-- ===== RECURSOS ===== -->
<div class="section">
<h2>üîó Recursos fiables</h2>

<table id="resourcesTable" class="display">
<thead>
<tr>
    <th>Tipo</th>
    <th>Pa√≠s</th>
    <th>URL</th>
</tr>
</thead>
<tbody>
{% for r in reports %}
<tr>
    <td>{{ r.tipo }}</td>
    <td>{{ r.pais }}</td>
    <td><a href="{{ r.url }}" target="_blank">{{ r.url }}</a></td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

</div>

<!-- SCRIPTS -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
$(document).ready(function(){
    $('#predictionsTable').DataTable();
    $('#mapaTable').DataTable();
    $('#resourcesTable').DataTable();
});
</script>

<!-- PARTICULAS -->
<script>
const c=document.getElementById("bgCanvas"),ctx=c.getContext("2d");
c.width=innerWidth;c.height=innerHeight;
let p=[];
for(let i=0;i<90;i++)
p.push({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*6+3,dx:(Math.random()-.5)*1.5,dy:(Math.random()-.5)*1.5});
function a(){
ctx.clearRect(0,0,c.width,c.height);
p.forEach(e=>{
e.x+=e.dx;e.y+=e.dy;
if(e.x<0||e.x>c.width)e.dx*=-1;
if(e.y<0||e.y>c.height)e.dy*=-1;
ctx.beginPath();
ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
ctx.fillStyle="rgba(30,144,255,.22)";
ctx.fill();
});
requestAnimationFrame(a);
}
a();
addEventListener("resize",()=>{c.width=innerWidth;c.height=innerHeight});
</script>

</body>
</html>


